=== added file 'debian/patches/D172126.diff'
--- debian/patches/D172126.diff	1970-01-01 00:00:00 +0000
+++ debian/patches/D172126.diff	2023-03-11 10:22:52 +0000
@@ -0,0 +1,25 @@
+# Use fully specified xsimd::batch type r=padenot
+# https://bugzilla.mozilla.org/show_bug.cgi?id=1821363
+
+diff --git a/dom/media/webaudio/AudioNodeEngineGeneric.h b/dom/media/webaudio/AudioNodeEngineGeneric.h
+--- a/dom/media/webaudio/AudioNodeEngineGeneric.h
++++ b/dom/media/webaudio/AudioNodeEngineGeneric.h
+@@ -203,14 +203,14 @@
+     MOZ_ASSERT((aSize % xsimd::batch<float, Arch>::size == 0),
+                "requires tail processing");
+ 
+     MOZ_UNROLL(2)
+     for (unsigned i = 0; i < aSize * 2;
+-         i += 2 * xsimd::batch<std::complex<float>>::size) {
+-      auto in1 = xsimd::batch<std::complex<float>>::load_aligned(
++         i += 2 * xsimd::batch<std::complex<float>, Arch>::size) {
++      auto in1 = xsimd::batch<std::complex<float>, Arch>::load_aligned(
+           reinterpret_cast<const std::complex<float>*>(&aInput[i]));
+-      auto in2 = xsimd::batch<std::complex<float>>::load_aligned(
++      auto in2 = xsimd::batch<std::complex<float>, Arch>::load_aligned(
+           reinterpret_cast<const std::complex<float>*>(&aScale[i]));
+       auto out = in1 * in2;
+       out.store_aligned(reinterpret_cast<std::complex<float>*>(&aOutput[i]));
+     }
+   };
+

=== modified file 'debian/patches/series'
--- debian/patches/series	2022-10-04 05:46:53 +0000
+++ debian/patches/series	2023-03-11 10:22:52 +0000
@@ -12,3 +12,5 @@
 ppc64el-workaround-bug-1555531.patch
 armhf-clang-no-integrated-as-for-neon.patch
 armhf-do-not-build-qcms-with-neon.patch
+webaudio-armhf-neon-ftbfs.patch
+D172126.diff

=== added file 'debian/patches/webaudio-armhf-neon-ftbfs.patch'
--- debian/patches/webaudio-armhf-neon-ftbfs.patch	1970-01-01 00:00:00 +0000
+++ debian/patches/webaudio-armhf-neon-ftbfs.patch	2023-03-11 10:22:52 +0000
@@ -0,0 +1,31 @@
+Description: Unset BUILD_ARM_NEON in webaudio when building on armhf,
+ This is specific to clang in Debian/Ubuntu.
+Author: Rico Tzschichholz <ricotz@ubuntu.com>
+Forwarded: not-needed
+
+diff -r 81040f1134e8 dom/media/webaudio/FFTBlock.h
+--- a/dom/media/webaudio/FFTBlock.h	Fri Mar 10 02:39:26 2023 +0000
++++ b/dom/media/webaudio/FFTBlock.h	Fri Mar 10 23:47:12 2023 +0100
+@@ -7,6 +7,10 @@
+ #ifndef FFTBlock_h_
+ #define FFTBlock_h_
+ 
++#if defined(__arm__)
++#undef BUILD_ARM_NEON
++#endif
++
+ #ifdef BUILD_ARM_NEON
+ #  include <cmath>
+ #  include "mozilla/arm.h"
+diff -r 81040f1134e8 dom/media/webaudio/moz.build
+--- a/dom/media/webaudio/moz.build	Fri Mar 10 02:39:26 2023 +0000
++++ b/dom/media/webaudio/moz.build	Fri Mar 10 23:47:12 2023 +0100
+@@ -125,7 +125,7 @@
+     "WebAudioUtils.cpp",
+ ]
+ 
+-if CONFIG["CPU_ARCH"] == "aarch64" or CONFIG["BUILD_ARM_NEON"]:
++if CONFIG["CPU_ARCH"] == "aarch64":
+     DEFINES["USE_NEON"] = True
+     LOCAL_INCLUDES += ["/third_party/xsimd/include"]
+     SOURCES += ["AudioNodeEngineNEON.cpp"]

