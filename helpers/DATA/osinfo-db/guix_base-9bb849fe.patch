From 9bb849fee4fd22d58a1e3d154c26272e1f642605 Mon Sep 17 00:00:00 2001
From: Julien Lepiller <julien@lepiller.eu>
Date: Sat, 29 Aug 2020 00:53:56 +0200
Subject: [PATCH] guix: add distro

Signed-off-by: Julien Lepiller <julien@lepiller.eu>
---
 data/os/guix.gnu.org/guix-1.1.xml.in          | 46 +++++++++++++++++++
 ...ix-system-install-1.1.0.i686-linux.iso.txt | 33 +++++++++++++
 ...-system-install-1.1.0.x86_64-linux.iso.txt | 33 +++++++++++++
 3 files changed, 112 insertions(+)
 create mode 100644 data/os/guix.gnu.org/guix-1.1.xml.in
 create mode 100644 tests/isodata/guix/guix-1.1/guix-system-install-1.1.0.i686-linux.iso.txt
 create mode 100644 tests/isodata/guix/guix-1.1/guix-system-install-1.1.0.x86_64-linux.iso.txt

diff --git a/data/os/guix.gnu.org/guix-1.1.xml.in b/data/os/guix.gnu.org/guix-1.1.xml.in
new file mode 100644
index 00000000..5533687e
--- /dev/null
+++ b/data/os/guix.gnu.org/guix-1.1.xml.in
@@ -0,0 +1,46 @@
+<libosinfo version="0.0.1">
+<!-- Licensed under the GNU General Public License version 2 or later.
+     See http://www.gnu.org/licenses/ for a copy of the license text -->
+  <os id="http://guix.gnu.org/guix/1.1">
+    <short-id>guix-1.1</short-id>
+    <name>Guix 1.1</name>
+    <version>1.1</version>
+    <vendor>Guix Contributors</vendor>
+    <family>linux</family>
+    <distro>guix</distro>
+
+    <release-date>2020-04-15</release-date>
+
+    <media arch="i686">
+      <!--<url>https://ftp.gnu.org/gnu/guix/guix-system-install-1.1.0.i686-linux.iso.xz</url>-->
+      <iso>
+        <volume-id>GUIX_IMAGE</volume-id>
+        <volume-size>584865792</volume-size>
+      </iso>
+      <kernel>gnu/store/506a8398hzkdqcm6y7r45fm0dvpaagks-linux-libre-5.4.31/bzImage</kernel>
+      <initrd>gnu/store/f1gga79nhl5if3rmm9n793c6jmdkb0j9-raw-initrd/initrd.cpio.gz</initrd>
+    </media>
+    <media arch="x86_64">
+      <!--<url>https://ftp.gnu.org/gnu/guix/guix-system-install-1.1.0.x86_64-linux.iso.xz</url>-->
+      <iso>
+        <volume-id>GUIX_IMAGE</volume-id>
+        <volume-size>586209280</volume-size>
+      </iso>
+      <kernel>gnu/store/g56i8savnfr7981fil03idkjl0syj29d-linux-libre-5.4.31/bzImage</kernel>
+      <initrd>gnu/store/33mpn6f0hy4m73m4isd5lg83qxwclld8-raw-initrd/initrd.cpio.gz</initrd>
+    </media>
+
+
+    <resources arch="all">
+      <minimum>
+        <ram>536870912</ram>
+        <storage>4294967296</storage>
+      </minimum>
+
+      <recommended>
+        <ram>2147483648</ram>
+        <storage>21474836480</storage>
+      </recommended>
+    </resources>
+  </os>
+</libosinfo>
diff --git a/tests/isodata/guix/guix-1.1/guix-system-install-1.1.0.i686-linux.iso.txt b/tests/isodata/guix/guix-1.1/guix-system-install-1.1.0.i686-linux.iso.txt
new file mode 100644
index 00000000..2bda2615
--- /dev/null
+++ b/tests/isodata/guix/guix-1.1/guix-system-install-1.1.0.i686-linux.iso.txt
@@ -0,0 +1,33 @@
+CD-ROM is in ISO 9660 format
+System id: 
+Volume id: GUIX_IMAGE
+Volume set id: 
+Publisher id: 
+Data preparer id: XORRISO-1.5.2 2019.10.26.180001, LIBISOBURN-1.5.2, LIBISOFS-1.5.2, LIBBURN-1.5.2
+Application id: 
+Copyright File id: 
+Abstract File id: 
+Bibliographic File id: 
+Volume set size is: 1
+Volume set sequence number is: 1
+Logical block size is: 2048
+Volume size is: 285579
+El Torito VD version 1 found, boot catalog is in sector 49266
+NO Joliet present
+
+SUSP signatures version 1 found
+Rock Ridge signatures version 1 found
+Rock Ridge id 'RRIP_1991A'
+Eltorito validation header:
+    Hid 1
+    Arch 0 (x86)
+    ID ''
+    Cksum AA 55 OK
+    Key 55 AA
+    Eltorito defaultboot header:
+        Bootid 88 (bootable)
+        Boot media 0 (No Emulation Boot)
+        Load segment 0
+        Sys type 0
+        Nsect 4
+        Bootoff C9C9 51657
diff --git a/tests/isodata/guix/guix-1.1/guix-system-install-1.1.0.x86_64-linux.iso.txt b/tests/isodata/guix/guix-1.1/guix-system-install-1.1.0.x86_64-linux.iso.txt
new file mode 100644
index 00000000..840368b3
--- /dev/null
+++ b/tests/isodata/guix/guix-1.1/guix-system-install-1.1.0.x86_64-linux.iso.txt
@@ -0,0 +1,33 @@
+CD-ROM is in ISO 9660 format
+System id: 
+Volume id: GUIX_IMAGE
+Volume set id: 
+Publisher id: 
+Data preparer id: XORRISO-1.5.2 2019.10.26.180001, LIBISOBURN-1.5.2, LIBISOFS-1.5.2, LIBBURN-1.5.2
+Application id: 
+Copyright File id: 
+Abstract File id: 
+Bibliographic File id: 
+Volume set size is: 1
+Volume set sequence number is: 1
+Logical block size is: 2048
+Volume size is: 286235
+El Torito VD version 1 found, boot catalog is in sector 49075
+NO Joliet present
+
+SUSP signatures version 1 found
+Rock Ridge signatures version 1 found
+Rock Ridge id 'RRIP_1991A'
+Eltorito validation header:
+    Hid 1
+    Arch 0 (x86)
+    ID ''
+    Cksum AA 55 OK
+    Key 55 AA
+    Eltorito defaultboot header:
+        Bootid 88 (bootable)
+        Boot media 0 (No Emulation Boot)
+        Load segment 0
+        Sys type 0
+        Nsect 4
+        Bootoff C4F4 50420
-- 
GitLab

