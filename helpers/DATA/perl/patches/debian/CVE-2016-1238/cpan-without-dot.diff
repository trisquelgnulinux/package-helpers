From bfe13f6c4ebe3d037642c7ee34070ae1897f9b01 Mon Sep 17 00:00:00 2001
From: Todd Rinaldo <toddr@cpan.org>
Date: Thu, 31 Mar 2016 17:04:47 -0500
Subject: Set PERL_USE_UNSAFE_INC for cpan usage

This change allows the majority of Perl modules to build/test/install from the
cpan client without having to modify them.

Bug: https://rt.perl.org/Public/Bug/Display.html?id=127810
Patch-Name: debian/CVE-2016-1238/cpan-without-dot.diff
---
 cpan/CPAN/scripts/cpan | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/cpan/CPAN/scripts/cpan b/cpan/CPAN/scripts/cpan
index ccba47e..e1c1f02 100644
--- a/cpan/CPAN/scripts/cpan
+++ b/cpan/CPAN/scripts/cpan
@@ -4,6 +4,11 @@ BEGIN { pop @INC if $INC[-1] eq '.' }
 use strict;
 use vars qw($VERSION);
 
+BEGIN {
+    # make sure we can install any modules from CPAN without patching them
+    $ENV{PERL_USE_UNSAFE_INC} = 1;
+}
+
 use App::Cpan '1.60_02';
 $VERSION = '1.61';
 
